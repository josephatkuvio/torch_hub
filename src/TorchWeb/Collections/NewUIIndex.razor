@page "/new-ui-page"

<section class="new-ui-section">

    <section class="tab-section">

        <ul class="tab-list">
            <li class="tab-item first-icon">
                <a class='tab-link @(activeTab == "all" ? "active" : "")' @onclick='() => ChangeTab("all")'>
                    <img src="/images/Flowchart.svg" />
                </a>
            </li>
            <li class="tab-item">
                <a class='tab-link @(activeTab == "status" ? "active" : "")' @onclick='() => ChangeTab("status")'>
                    <img src="/images/ProgressIcon.svg" />
                </a>
            </li>
            <li class="tab-item">
                <a class='tab-link @(activeTab == "workflow" ? "active" : "")' @onclick='() => ChangeTab("workflow")'>
                    <img src="/images/ManageIcon.svg" />
                </a>
            </li>
        </ul>

        <section class="tab-content">
            @if (activeTab == "all")
            {
            <NewUIWorkflow />
            }
            else if (activeTab == "status")
            {
            <NewUIStatus />
            }
            else if (activeTab == "workflow" && !showDetail)
            {
                <NewUIManageWorkflow OnContentClick="ToggleShowDetail" />
            }
            else if (activeTab == "workflow" && showDetail)
            {
            <NewUIWorkflowDetail />
            }
            </section>

        </section>

        <section class="tab-section">
            <ul class="tab-list">
            <li class="tab-item" @onclick="ToggleSummary">
                    <a class="tab-link active" name="summary">
                        <img src="/images/summaryIcon.svg" />
                    </a>
                </li>
            </ul>
            <section class="tab-content">
                <NewUISummary />
            </section>
        </section>

    </section>


    @code {
    private string activeTab = "all";
    private bool showDetail = false;

    bool IsSummaryActive = true;

    string ActiveTabClass => $"collection-{activeTab}{(IsSummaryActive ? "-summary" : "")}";


    private void ChangeTab(string tabName)
    {
        activeTab = tabName;
    }

    private void ToggleShowDetail()
    {
        showDetail = !showDetail;
    }

    void ToggleSummary() => IsSummaryActive = !IsSummaryActive;
}
